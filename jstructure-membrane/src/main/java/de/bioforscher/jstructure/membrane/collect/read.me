Routine to gather all needed data.